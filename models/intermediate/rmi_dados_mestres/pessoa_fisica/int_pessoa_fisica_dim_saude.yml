version: 2

models:
  - name: int_pessoa_fisica_dim_saude
    description: Consolida dados de saúde de pessoas físicas do SMS
    config:
      materialized: ephemeral
    columns:
      - name: cpf
        description: Cadastro de Pessoa Física (CPF) do indivíduo
        data_type: string
        data_tests:
          - unique:
              name: intermediate_rmi_dados_mestres_int_pessoa_fisica_dim_saude__cpf__unique
              severity: error
      - name: saude
        description: Estrutura completa com dados de saúde (clínica família, equipe saúde família)
        data_type: record
        data_tests:
          - not_null:
              name: intermediate_rmi_dados_mestres_int_pessoa_fisica_dim_saude__saude__not_null
              severity: error
      - name: cpf_particao
        description: "Coluna de partição baseada no CPF para otimização de queries."
        data_type: integer